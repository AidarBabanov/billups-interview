# Billups interview question

Coding interview for Billups company.

## Service configuration

For the correct service work, you need to use environment variables or the `.env` file. You can find an example file
named `.env.example`.

In order to use the file, download the [godotenv](https://github.com/joho/godotenv)
binary file. General command to run `.env` file:

```bash
godotenv -f .env [command]
```

## Environment Variables

| Variable             | Default | Description                                                                                  |
|----------------------|:-------:|----------------------------------------------------------------------------------------------|
| LOG_LEVEL            |  debug  | Log level for logger. Possible options: trace, debug, info, warning, error, fatal and panic. |
| SERVER_PORT          |  8080   | Port on which app will run.                                                                  |
| SERVER_READ_TIMEOUT  |   15s   | App read response time.                                                                      |
| SERVER_WRITE_TIMEOUT |   15s   | App write response time.                                                                     |


## Installation

### Manual

You can build the service with the following terminal command:

```bash
go build ./cmd/...
```

Before running the service set up the environment variables and run the app:

```bash
# running the app
app
```

### Docker installation

Installation could be done with `docker` and `docker-compose` tools. Set up the environment variables or use `.env`
file.

```bash
docker-compose up --build
```

## Testing

Unit-tests are using mocks generated by [mockery](https://github.com/vektra/mockery). Mocks generation commands are
embedded in-source using [go:generate](https://golang.org/cmd/go/#hdr-Generate_Go_files_by_processing_source)
comments, so before running tests, you need to launch code generation.

Set up corresponding environment variables for tests.

```bash
# Install mockery tool
go install github.com/vektra/mockery/v2@@v2.10.0

# Run code generation
go generate ./...

# Run unit tests
go test ./...

# with .env file
godotenv -f .env go test ./...
```


## Documentation

Documentation for the REST API is generated with [go-swagger tool](https://github.com/go-swagger/go-swagger).

```bash
# generating swagger spec
swagger generate spec -o swagger.yml

# serving interactive UI in the browser
swagger serve -F swagger ./swagger.yml
```

[Swagger UI](https://swagger.io/tools/swagger-ui/) is a graphical representation of swagger specifications. You can
access REST documentation with "[base_endpoint]/doc/".